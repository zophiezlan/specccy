---
description: Execute the program implementation planning workflow using the plan template to generate design artifacts for NUAA initiatives.
scripts:
  sh: scripts/bash/setup-program-plan.sh --json
  ps: scripts/powershell/setup-program-plan.ps1 -Json
---

The user input to you can be provided directly by the agent or as a command argument - you **MUST** consider it before proceeding with the prompt (if not empty).

User input:

$ARGUMENTS

Given the program implementation details provided as an argument, do this:

1. Run `{SCRIPT}` from the repo root and parse JSON for PROGRAM_SPEC, IMPL_PLAN, PROGRAMS_DIR, PROGRAM_ID. All future file paths must be absolute.

   - BEFORE proceeding, inspect PROGRAM_SPEC for a `## Clarifications` section with at least one `Session` subheading. If missing or clearly ambiguous areas remain (vague program scope, unresolved funding questions, unclear target population), PAUSE and instruct the user to run `/clarify` first to reduce rework. Only continue if: (a) Clarifications exist OR (b) an explicit user override is provided (e.g., "proceed without clarification"). Do not attempt to fabricate clarifications yourself.

2. Read and analyze the program specification to understand:

   - The program requirements and community impact scenarios
   - Target population and service delivery requirements
   - Stakeholder mapping and partnership requirements
   - Funding sources and compliance obligations
   - Success criteria and evaluation measures

3. Read the constitution at `/memory/constitution.md` to understand constitutional requirements for NUAA programs.

4. Execute the program implementation plan template:

   - Load `/templates/program-plan-template.md` (already copied to IMPL_PLAN path)
   - Set Input path to PROGRAM_SPEC
   - Run the Execution Flow (main) function steps 1-9
   - The template is self-contained and executable
   - Follow error handling and constitutional gate checks as specified
   - Let the template guide artifact generation in $PROGRAMS_DIR:
     - Phase 0 generates research.md
     - Phase 1 generates stakeholder-map.md, service-model.md, evaluation-framework.md
     - Phase 2 planning approach (activities.md generated by separate command)
   - Incorporate user-provided program details from arguments into Program Context: {ARGS}
   - Update Progress Tracking as you complete each phase

5. Verify execution completed:

   - Check Progress Tracking shows all phases complete
   - Ensure all constitutional gates passed
   - Confirm all required artifacts were generated
   - Verify no ERROR states in execution

6. Report results with program ID, file paths, and generated artifacts.

**Constitutional Compliance Requirements**:

- All constitutional principles must be addressed in planning
- Community consultation must be embedded throughout
- Peer leadership must be central to service delivery model
- Evidence base must justify all program design decisions
- Harm reduction principles must be explicit in all frameworks

Use absolute paths with the repository root for all file operations to avoid path issues.
